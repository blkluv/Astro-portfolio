---
import BaseHead from "../components/BaseHead.astro";
import Header from "../components/Header.svelte";
import Footer from "../components/Footer.astro";
import BlogCard from "../components/blogCard.astro";
import SectionHeader from "./SectionHeader.svelte";

// Use Astro.glob() to fetch all posts, and then sort them by date.
const techPosts = (await Astro.glob("../pages/blog/tech/*.{md,mdx}")).sort(
	(a, b) =>
		new Date(b.frontmatter.pubDate).valueOf() -
		new Date(a.frontmatter.pubDate).valueOf()
);
const improvementPosts = (
	await Astro.glob("../pages/blog/improvement/*.{md,mdx}")
).sort(
	(a, b) =>
		new Date(b.frontmatter.pubDate).valueOf() -
		new Date(a.frontmatter.pubDate).valueOf()
);
---
<!-- <head>
	<BaseHead
		title="Bloggington"
		description="A list of Joe Malatesta's blog posts about tech, coding, and self improvement."
	/>
</head> -->
		<main>
			<SectionHeader title={"Blog"} />
			<div class="my-4 flex flex-col justify-center md:flex-row">
				<div class="m-6">
					<h3 class="ml-2 text-3xl font-bold md:text-4xl text-rose-400">Tech Blogs</h3>
					<div class="flex flex-col items-center justify-center">
						<a href=""></a>
						{
							techPosts
								.slice(0, 4)
								.map((post) => (
									<BlogCard
										title={post.frontmatter.title}
										description={post.frontmatter.cardDescription}
										date={post.frontmatter.pubDate}
										url={post.url}
									/>
								))
						}
					</div>
					<h5><a href="/tech-blogs" class="text-rose-500 underline-offset-2 underline hover:text-rose-600">All tech blogs</a></h5>
				</div>
				<div class="m-6">
					<h3 class="text-3xl font-bold md:text-4xl text-rose-400">Self Improvement</h3>
					<div class="flex flex-col items-center justify-center">
						<a href=""></a>
						{
							improvementPosts
								.slice(0, 4)
								.map((post) => (
									<BlogCard
										title={post.frontmatter.title}
										description={post.frontmatter.cardDescription}
										date={post.frontmatter.pubDate}
										url={post.url}
									/>
								))
						}
					</div>
					<h5><a href="/improvement-blogs" class="text-rose-500 underline-offset-2 underline hover:text-rose-600">All self improvement blogs</a></h5>
				</div>
			</div>
		</main>

